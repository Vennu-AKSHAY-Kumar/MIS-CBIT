"use strict";(self.webpackChunkcbit_management_information_system=self.webpackChunkcbit_management_information_system||[]).push([[8922,6261],{6261:function(e,t,a){a.r(t);var r=a(7313),n=a(5662),s=a(2548),i=a(1405),l=a(501),c=a(1629),o=a(6835),h=a(3477),d=a(3467),p=a(4076),g=a(7478),m=a(7649),u=a(8737),x=a(5508),b=(a(8695),a(6417));t.default=()=>{const[e,t]=(0,r.useState)([]),[a,f]=(0,r.useState)(""),[j,y]=(0,r.useState)([]),[Z,k]=(0,r.useState)(""),[w,v]=(0,r.useState)([]),[C,L]=(0,r.useState)(""),[E,P]=(0,r.useState)([]),[S,_]=r.useState(0),[V,$]=r.useState(10),[D,M]=(0,r.useState)(null),[R,A]=(0,r.useState)(!1),[N,O]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{try{const e=await n.Z.get("https://cbitmis-backend-3.onrender.com/api/departments/blocks");t(e.data)}catch(e){console.error("Error fetching blocks:",e)}})()}),[]);return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginBottom:"10px"},children:[(0,b.jsx)("button",{onClick:()=>{if(!D)return;const e=Object.keys(D[0]),t=D.map((t=>{const a={};return e.forEach((e=>{a[e]=t[e]})),a})),a=u.P6.json_to_sheet(t),r=u.P6.book_new();u.P6.book_append_sheet(r,a,"posts"),u.NC(r,"postsData.xlsx"),A(!0)},style:{marginRight:"10px"},children:"Generate Excel"}),(0,b.jsx)("button",{onClick:()=>{if(!D)return;const e=new x.jsPDF;e.autoTable({html:"#jsonTable"}),e.save("jsonData.pdf"),O(!0)},children:"Generate PDF"})]}),(0,b.jsxs)(s.Z,{value:a,onChange:async e=>{const t=e.target.value;f(t);try{const e=await n.Z.get(`https://cbitmis-backend-3.onrender.com/api/departments/departments/${t}`);y(e.data)}catch(a){console.error(`Error fetching departments for block ${t}:`,a)}k(""),v([]),L(""),P([])},displayEmpty:!0,variant:"outlined",style:{marginRight:"10px"},children:[(0,b.jsx)(i.Z,{value:"",disabled:!0,children:"Select Block"}),e.map((e=>(0,b.jsx)(i.Z,{value:e,children:e},e)))]}),(0,b.jsxs)(s.Z,{value:Z,onChange:async e=>{const t=e.target.value;k(t);try{const e=await n.Z.get(`http://localhost:5000/api/departments/categories/${a}/${t}`);v(e.data)}catch(r){console.error(`Error fetching categories for department ${t} in block ${a}:`,r)}L(""),P([])},displayEmpty:!0,variant:"outlined",style:{marginRight:"10px"},disabled:!a,children:[(0,b.jsx)(i.Z,{value:"",disabled:!0,children:"Select Department"}),j.map((e=>(0,b.jsx)(i.Z,{value:e.name,children:e.name},e._id)))]}),(0,b.jsxs)(s.Z,{value:C,onChange:async e=>{const t=e.target.value;L(t);const r=`http://localhost:5000/api/departments/A/civil/${t}`;try{const e=await n.Z.get(r);P(e.data),(e=>{fetch(e).then((e=>{if(!e.ok)throw new Error("Failed to fetch data");return e.json()})).then((e=>{if(!(e&&e.length>0))throw new Error("Empty JSON response");M(e)})).catch((e=>{console.error("Error fetching data:",e)}))})(r)}catch(s){console.error(`Error fetching ${t} for department ${Z} in block ${a}:`,s)}},displayEmpty:!0,variant:"outlined",style:{marginRight:"10px"},disabled:!Z,children:[(0,b.jsx)(i.Z,{value:"",disabled:!0,children:"Select Category"}),w.map((e=>(0,b.jsx)(i.Z,{value:e,children:e},e)))]}),(0,b.jsxs)(l.Z,{sx:{width:"100%",overflow:"hidden"},children:[(0,b.jsx)(c.Z,{sx:{maxHeight:440},children:(0,b.jsxs)(o.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,b.jsx)(h.Z,{children:(0,b.jsx)(p.Z,{children:E.length>0&&"object"===typeof E[0]&&Object.keys(E[0]).map((e=>"_id"!==e&&(0,b.jsx)(g.Z,{children:(0,b.jsx)("b",{children:e.toUpperCase()})},e)))})}),(0,b.jsx)(d.Z,{children:E.map(((e,t)=>(0,b.jsx)(p.Z,{children:"object"===typeof e&&Object.keys(e).map((t=>"_id"!==t&&(0,b.jsx)(g.Z,{children:"boolean"===typeof e[t]?e[t]?"Yes":"No":e[t]},t)))},t)))})]})}),(0,b.jsx)(m.Z,{rowsPerPageOptions:[10,25,100],component:"div",count:E.length,rowsPerPage:V,page:S,onPageChange:(e,t)=>{_(t)},onRowsPerPageChange:e=>{$(+e.target.value),_(0)}})]}),R&&(0,b.jsx)("p",{children:"Excel file generated successfully."}),N&&(0,b.jsx)("p",{children:"PDF file generated successfully."})]})}},9726:function(e,t,a){a.d(t,{Z:function(){return h}});var r=a(9860),n=a(7503),s=a(5272),i=a(891),l=a(8119),c=a(6417);var o=e=>{let{color:t,outline:a,size:n,sx:s,...i}=e;const o=(0,r.Z)(),h=t&&!a&&{color:o.palette.background.paper,bgcolor:`${t}.main`},d=a&&{color:t?`${t}.main`:"primary.main",bgcolor:o.palette.background.paper,border:"2px solid",borderColor:t?`${t}.main`:"primary.main"};let p={};switch(n){case"badge":p={width:o.spacing(3.5),height:o.spacing(3.5)};break;case"xs":p={width:o.spacing(4.25),height:o.spacing(4.25)};break;case"sm":p={width:o.spacing(5),height:o.spacing(5)};break;case"lg":p={width:o.spacing(9),height:o.spacing(9)};break;case"xl":p={width:o.spacing(10.25),height:o.spacing(10.25)};break;case"md":p={width:o.spacing(7.5),height:o.spacing(7.5)};break;default:p={}}return(0,c.jsx)(l.Z,{sx:{...h,...d,...p,...s},...i})};var h=e=>{let{title:t,link:a,icon:l}=e;const h=(0,r.Z)();return(0,c.jsx)(n.Z,{title:t||"Reference",placement:"left",children:(0,c.jsxs)(s.Z,{disableRipple:!0,children:[!l&&(0,c.jsx)(o,{component:i.Z,href:a,target:"_blank",alt:"MUI Logo",size:"badge",color:"primary",outline:!0,children:(0,c.jsxs)("svg",{width:"500",height:"500",viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,c.jsxs)("g",{clipPath:"url(#clip0)",children:[(0,c.jsx)("path",{d:"M100 260.9V131L212.5 195.95V239.25L137.5 195.95V282.55L100 260.9Z",fill:h.palette.primary[800]}),(0,c.jsx)("path",{d:"M212.5 195.95L325 131V260.9L250 304.2L212.5 282.55L287.5 239.25V195.95L212.5 239.25V195.95Z",fill:h.palette.primary.main}),(0,c.jsx)("path",{d:"M212.5 282.55V325.85L287.5 369.15V325.85L212.5 282.55Z",fill:h.palette.primary[800]}),(0,c.jsx)("path",{d:"M287.5 369.15L400 304.2V217.6L362.5 239.25V282.55L287.5 325.85V369.15ZM362.5 195.95V152.65L400 131V174.3L362.5 195.95Z",fill:h.palette.primary.main})]}),(0,c.jsx)("defs",{children:(0,c.jsx)("clipPath",{id:"clip0",children:(0,c.jsx)("rect",{width:"300",height:"238.3",fill:"white",transform:"translate(100 131)"})})})]})}),l&&(0,c.jsx)(o,{component:i.Z,href:a,target:"_blank",size:"badge",color:"primary",outline:!0,children:l})]})})}},8922:function(e,t,a){a.r(t);var r=a(7592),n=(a(6261),a(3497)),s=a(5587),i=(a(9726),a(6417));(0,r.ZP)("iframe")((e=>{let{theme:t}=e;return{height:"calc(100vh - 210px)",border:"1px solid",borderColor:t.palette.primary.light}}));t.default=()=>(0,i.jsx)(n.Z,{title:"D Block Details (MECHANICAL)",children:(0,i.jsx)(s.Z,{block:"D",department:"MECHANICAL"})})}}]);