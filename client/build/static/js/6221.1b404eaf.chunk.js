"use strict";(self.webpackChunkcbit_management_information_system=self.webpackChunkcbit_management_information_system||[]).push([[6221],{6221:function(e,r,s){s.r(r);var o=s(7313),a=s(8467),i=s(5662),n=s(1933),t=s(9429),d=s(6149),l=s(3604),c=s(6467),m=s(1550),u=s(3306),p=s(7843),f=s(5480),h=s(4117),w=s(1095),g=s(5281),Z=s(6417);r.default=e=>{let{onClose:r}=e;const[s,x]=(0,o.useState)(!1),[b,v]=(0,o.useState)(""),[P,j]=(0,o.useState)(""),y=(0,a.s0)();return(0,Z.jsxs)(d.Z,{open:!0,onClose:r,children:[(0,Z.jsx)(l.Z,{children:"Reset Password"}),(0,Z.jsxs)(c.Z,{children:[P&&(0,Z.jsx)("div",{style:{marginBottom:"20px",color:"green"},children:P}),b&&(0,Z.jsx)("div",{style:{marginBottom:"20px",color:"red"},children:b}),(0,Z.jsx)(t.J9,{initialValues:{password:"",confirmPassword:""},validationSchema:n.Ry().shape({password:n.Z_().min(8,"Password must be at least 8 characters").required("Password is required"),confirmPassword:n.Z_().oneOf([n.iH("password"),null],"Passwords must match").required("Confirm Password is required")}),onSubmit:(e,r)=>{(async e=>{x(!0);try{console.log("hi");const r=new URLSearchParams(window.location.search).get("token");if(!r)throw new Error("Token is missing");(await i.Z.post("http://localhost:8000/auth/reset-password",{token:r,password:e.password})).data.success?(j("Password reset successfully!"),setTimeout((()=>{j(""),y("/pages/login/login3")}),3e3)):v("Failed to reset password. Please try again later.")}catch(b){v(b.message||"Failed to reset password. Please try again later.")}x(!1)})(e),r.setSubmitting(!1)},children:e=>{let{errors:o,handleBlur:a,handleChange:i,handleSubmit:n,isSubmitting:t,touched:d,values:l}=e;return(0,Z.jsxs)("form",{onSubmit:n,children:[(0,Z.jsxs)(m.Z,{fullWidth:!0,style:{marginTop:"10px"},children:[(0,Z.jsx)(u.Z,{htmlFor:"outlined-adornment-password",children:"Password"}),(0,Z.jsx)(p.Z,{id:"outlined-adornment-password",type:"password",value:l.password,name:"password",onBlur:a,onChange:i,label:"Password"}),d.password&&o.password&&(0,Z.jsx)(f.Z,{error:!0,children:o.password})]}),(0,Z.jsxs)(m.Z,{fullWidth:!0,style:{marginTop:"20px"},children:[(0,Z.jsx)(u.Z,{htmlFor:"outlined-adornment-confirm-password",children:"Confirm Password"}),(0,Z.jsx)(p.Z,{id:"outlined-adornment-confirm-password",type:"password",value:l.confirmPassword,name:"confirmPassword",onBlur:a,onChange:i,label:"Confirm Password"}),d.confirmPassword&&o.confirmPassword&&(0,Z.jsx)(f.Z,{error:!0,children:o.confirmPassword})]}),(0,Z.jsxs)(h.Z,{children:[(0,Z.jsx)(w.Z,{onClick:r,color:"primary",children:"Cancel"}),(0,Z.jsx)(w.Z,{type:"submit",color:"primary",variant:"contained",disabled:t,children:s?(0,Z.jsx)(g.Z,{size:24}):"Submit"})]})]})}})]})]})}},5480:function(e,r,s){s.d(r,{Z:function(){return v}});var o=s(3366),a=s(7462),i=s(7313),n=s(4146),t=s(1921),d=s(300),l=s(9008),c=s(7592),m=s(1615),u=s(7430),p=s(2298);function f(e){return(0,p.ZP)("MuiFormHelperText",e)}var h,w=(0,u.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),g=s(7342),Z=s(6417);const x=["children","className","component","disabled","error","filled","focused","margin","required","variant"],b=(0,c.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:s}=e;return[r.root,s.size&&r[`size${(0,m.Z)(s.size)}`],s.contained&&r.contained,s.filled&&r.filled]}})((e=>{let{theme:r,ownerState:s}=e;return(0,a.Z)({color:(r.vars||r).palette.text.secondary},r.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${w.disabled}`]:{color:(r.vars||r).palette.text.disabled},[`&.${w.error}`]:{color:(r.vars||r).palette.error.main}},"small"===s.size&&{marginTop:4},s.contained&&{marginLeft:14,marginRight:14})}));var v=i.forwardRef((function(e,r){const s=(0,g.Z)({props:e,name:"MuiFormHelperText"}),{children:i,className:c,component:u="p"}=s,p=(0,o.Z)(s,x),w=(0,l.Z)(),v=(0,d.Z)({props:s,muiFormControl:w,states:["variant","size","disabled","error","filled","focused","required"]}),P=(0,a.Z)({},s,{component:u,contained:"filled"===v.variant||"outlined"===v.variant,variant:v.variant,size:v.size,disabled:v.disabled,error:v.error,filled:v.filled,focused:v.focused,required:v.required}),j=(e=>{const{classes:r,contained:s,size:o,disabled:a,error:i,filled:n,focused:d,required:l}=e,c={root:["root",a&&"disabled",i&&"error",o&&`size${(0,m.Z)(o)}`,s&&"contained",d&&"focused",n&&"filled",l&&"required"]};return(0,t.Z)(c,f,r)})(P);return(0,Z.jsx)(b,(0,a.Z)({as:u,ownerState:P,className:(0,n.Z)(j.root,c),ref:r},p,{children:" "===i?h||(h=(0,Z.jsx)("span",{className:"notranslate",children:"\u200b"})):i}))}))}}]);